## 什么是进程

### 什么是进程

进程是一个应用程序运行时刻的实例（从进程的结构看）；进程是应用程序运行时所需资源的容器（从进程的功能看）；甚至进程是一堆数据结构（从操作系统对进程实现的角度来说）

### 进程的结构

首先，进程是一个应用程序运行时刻的实例，它的目的就是操作系统用于管理和运行多个应用程序的；其次，从前面我们实现的内存管理组件角度看，操作系统是给应用程序提供服务的。所以，从这两个角度看，进程必须要有一个地址空间，这个地址空间至少包括两部分内容：一部分是内核，一部分是用户的应用程序。

进程需要实现哪些功能？

我们先从应用程序和内核的关系看。应用程序需要内核提供资源，而内核需要控制应用程序的运行。那么内核必须能够命令应用程序，让它随时中断（进入内核地址空间）或恢复执行，这就需要保存应用程序的机器上下文和它运行时刻的栈。

接着，我们深入内核提供服务的机制。众所周知，内核是这样提供服务的：通过停止应用程序代码运行，进入内核地址空间运行内核代码，然后返回结果。就像活动组织者会用表格备案一样，内核还需要记录一个应用程序都访问了哪些资源，比如打开了某个文件，或是访问了某个设备。而这样的“记录表”，我们就用“资源描述符”来表示。

![进程结构细化示意图](./24_01.png)

### 实现进程

### 如何表示一个进程
### 进程的地址空间
### 进程的上下文

### 建立进程

建立 thread_t 结构的实例变量，建立进程的应用程序栈，进程的内核栈，进程地址空间等。

### 建立进程接口
### 建立内核进程
### 创建 thread_t 结构
### 初始化内核栈
### 建立普通进程
### 思考题

各个进程是如何共享同一份内核代码和数据的？

### question

1. thread_t 进程结构
2. mmadrsdsc_t 进程地址空间
3. context_t,x64tss_t 进程的上下文相关结构（难懂）
4. 建立进程。建立进程接口，建立内核进程，创建thread_t结构，建立普通进程
5. 初始化内核栈（难懂）
