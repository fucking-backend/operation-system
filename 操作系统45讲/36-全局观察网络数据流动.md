## 从URL到网卡：如何全局观察网络数据流动？

### 输入 URL，从一个请求到响应都发生了什么事？

1. 常规的网络交互过程是从客户端发起网络请求，用户态的应用程序（浏览器）会生成 HTTP 请求报文、并通过 DNS 协议查找到对应的远端 IP 地址。
2. 在套接字生成之后进入内核态，浏览器会委托操作系统内核协议栈中的上半部分，也就是 TCP/UDP 协议发起连接请求。
3. 然后经由协议栈下半部分的 IP 协议进行封装，使数据包具有远程定位能力。
4. 经过 MAC 层处理，找到接收方的目标 MAC 地址。
5. 最终数据包在经过网卡转化成电信号经过交换机、路由器发送到服务端，服务端经过处理拿到数据，再通过各种网络协议把数据响应给客户端。
6. 客户端拿到数据进行渲染。
7. 客户端和服务端之间反复交换数据，客户端的页面数据就会发生变化。

### 网络分层和网络协议

网络为什么要分层呢？网络协议又是什么呢？

通过分层处理简化问题难度，降低复杂度，由于分层后的各层之间相互独立，我们可以把大问题分割成小问题。同样，分层也保证了网络的松耦合和相对的灵活，分层拆分后易于各层的实现和维护，也方便了各层的后续扩展。

网络分层解决了网络复杂的问题，在网络中传输数据中，我们对不同设备之间的传输数据的格式，需要定义一个数据标准，所以就有了网络协议。


### 发起请求阶段（应用层）

应⽤层是⼯作在操作系统中的⽤户态。

### 用户输入：在浏览器中输入 URL
### 网络请求前：查看浏览器缓存
### 域名解析：DNS
### 操作系统协议栈（传输层和网络层）

现在我们已经根据 URL 拿到需要请求的唯一地址了，接下来就要委托操作系统将 HTTP 报文发送出去了，这个过程由操作系统中的协议栈负责处理。

### 可靠性传输：建立 TCP 连接
### 目的地定位：IP 层
### 点对点传输：MAC（链路层）
### 电信号的出口：网卡（物理层）
### 客户端/服务端的持续数据交换（应用层）
### 
### 
### 思考题
### question

1. 