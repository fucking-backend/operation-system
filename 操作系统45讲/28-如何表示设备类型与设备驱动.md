## 如何表示设备类型与设备驱动？

### 计算机的结构
### 如何管理设备
### 分权而治
### 设备分类
### 设备驱动
### 设备
### 驱动
### 设备驱动组织
### 驱动程序功能
### 
### 
### 
### 思考题
### question

1. 操作系统内核如何表示多个设备与驱动的存在？
2. 如何组织多个设备和多个驱动程序的问题
3. 应该让驱动程序提供一些什么支持
4. 驱动程序，究竟要为操作系统内核提供哪些最基本的功能支持？


```sh
一、数据结构
有一个全局devtable_t结构变量osdevtable，用于管理全部驱动程序及设备，其中包括：
A、全局驱动程序链表，保存全部驱动【driver_t结构】
B、全局设备链表，包括各种设备类型的链表【devtlst_t结构】，每个devtlst_t中包括了某一类型的全部设备链表【device_t结构】

device_t用于描述一个设备，其中包括：
A、devid_t用于描述设备ID【包括设备类型、设备子类型、设备序列号等】
B、driver_t指针用于指向设备驱动程序，从设备可以找到驱动

driver_t用于描述一个驱动程序，其中包括：
A、驱动功能函数指针数组drivcallfun_t[]
B、包括使用该驱动程序的全部设备的列表，从驱动可以找到设备

二、驱动程序，函数有三类
设备中断处理函数
驱动入口和退出函数
驱动功能函数

三、初始化
init_krl->init_krldevice->devtable_t_init
->初始化全局设备列表
->初始化全局驱动列表
->对于每类设备，初始化devtlst_t结构
```