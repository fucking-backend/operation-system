## 并发

### 线程

TCB（Thread Control Block）

### 并发关键术语

【临界区】、【静态条件】、【原子操作】、【睡眠/唤醒机制（条件变量）】

### 锁

实现一个锁（需要硬件和操作系统支持）。评价锁的标准：提供互斥，公平性，性能

    （1）控制中断
    （2）测试并设置指令
    （3）自旋锁
    （4）比较并交换
    （5）连接的加载和条件式存储
    （6）获取并增加
    （7）自旋过多怎么办
    （8）使用队列：休眠代替自旋（调度睡眠/唤醒）
    （9）两阶段锁

### 基于锁的并发数据结构

【计数器】，【链表】，【队列】，【散列表】

并发计数器：（1）直接一个全局锁；（2）懒惰计数器，多个局部计数器（每个CPU）和一个全局计数器

并发链表：（1）上来就加锁；（2）获取锁和释放锁在真正的临界区；（3）一定数量的节点用一个锁

并发队列：（1）直接一个全局大锁；（2）队头一把锁，队尾一把锁

并发散列表：（1）直接一个全局大锁；（2）每个散列桶一个锁

### 条件变量（🔥🔥🔥）

【生产者/消费者问题（有界缓冲区）问题】

### 信号量（🔥🔥🔥）

什么是信号量？什么是二值信号量（锁）？用锁和条件变量来实现信号量？不用锁和条件变量，如何实现信号量？

【生产者/消费者问题（有界缓冲区）问题】，【读者/写者锁】，【哲学家就餐问题】

如何实现信号量？

### 常见并发问题

非死锁缺陷：（1）违反原子性缺陷；（2）违反顺序缺陷

死锁缺陷。产生死锁的条件：**互斥，持有并等待，非抢占，循环等待**,死者缺一不可。

### 基于事件的并发


