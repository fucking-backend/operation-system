### 标准输入，标准输出，标准错误

```bash
# 标准文件描述符
# 0（标准输入）
cat < testfile
# 1（标准输出）， >> 追加方式输出
cat testfile > output
cat testfile >> output
# 2（标准错误）
cat testfile 2> output

# 分别重定向错误(2> )和正常输出(1> )
ls -al output out1 out2 2> outerr 1> outout
# 重定向错误和正常输出到一个文件(&>)
ls -al output out1 out2 &> output


# 脚本中重定向输出。临时重定向，永久重定向

# 临时重定向。 ./test 2> output
echo "This is an error" >&2 # error输出被重定向
echo "This is a normal output" 

# exec永久重定向
exec 2> testerror 
echo "第一行输出" 
echo "之后的输出会重定向到其他文件" 
exec 1> testout
echo "重定向到testout文件" 
echo "重定向到testerror文件" >&2 

# 重定向输出
exec 0< /etc/passwd
count=1
while read line
do 
	echo "Line #$count:   $line"
	count=$[ $count+1 ]
done

```

### 自定义重定向 （question）

```bash
# 创建【输出】文件描述符
# 重定向文件描述符
# 创建【输入】文件描述符
# 创建读写文件描述符
# 关闭文件描述符 &-
```

### 列出打开的文件描述符 lsof命令

```bash
# 
```

### 阻止命令输出，重定向到该位置的任何数据都会被丢掉

重定向到/dev/null文件

```bash
# 
ls -al > /dev/null 
# 避免出现错误信息，也无需保存他们的一个方法。还有其他办法？
ls -al 31script testerror test 2> /dev/null
```

### 创建临时文件

使用/tmp目录保存临时文件，系统启动时会自动删除

```bash
# mktemp创建临时文件
tempfile=$(mktemp test04.XXXXXX)
exec 3>$tempfile
exec 2>testerror # 标准错误重定向
echo "this script write to temp file $tempfile"
echo "第一行" >&3
echo "第二行" >&3
echo "最后一行" >&3
# 关闭文件描述符 &-。之后再写就会报错
exec 3>&-
# line 11: 3: Bad file descriptor
echo "最后一行" >&3 >&2
echo "Done creating temp file, the content are:"
cat $tempfile
rm -f $tempfile 2> /dev/null

# mktemp -d dir.XXXXXX 创建临时目录

```

### 记录消息：将输出同时发行到显示器和日志文件 tee命令（默认覆盖输出，-a参数追加）

```bash
# 默认覆盖文件内容
who | tee testout
# -a参数，追加文件
who | tee -a testout
```