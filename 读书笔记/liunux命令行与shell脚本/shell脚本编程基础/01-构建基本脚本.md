## 构建基本脚本

```bash
# 使用多个命令
# question 封号分割和&&分割有什么区别
# question 最大命令行字数255，这个数字怎么来的
date; who
date && who


# 创建shell脚本
#!/bin/bash # shell脚本开头
echo The time and date are: # echo 显示消息
date
echo -n The time and date are: # -n参数，将命令行和文本字符串显示在同一行
date
echo "Let's see who logged into this system":
who


# 使用变量
# 环境变量
echo "User info for userid: $USER"
echo UID: $UID
echo HOME: $HOME

echo The cost is \$15 # 转义字符
# 用户变量
var1=10
var2="ten"
var3=$USER # 对变量赋值无须$符号
echo $var1 $var2 $var3 # 引用一个变量时需要$符号

# 命令替换
comd1=$(date) # $()格式
comd2=`who`   # 反引号格式

echo "The date and time are:"$comd1
echo "Who logged:"$comd2

today=$(date +%y%m%d) # 命令替换
ls /usr/bin -al > log.$today


# 重定向输入输出
# 输出重定向
ls -l > test31  # 会覆盖已有文件
ls -l >> test31 # 追加数据
# 输入重定向
wc < test31
# question 内联输入重定向

# 管道
cat test31 | grep ubuntu

# 执行数学运算
# expr命令
expr 2 + 5
expr 2 \* 5 # 注意使用转义符
v1=20
v2=10
v3=$(expr $v1 / $v2)
echo $v3

# 使用方括号执行数学表达式
v1=$[1 + 5]
echo $v1
v2=$[$v1 * 2]
echo $v2
v3=$[$v2 / 5]  # 只支持整数运算
echo $v3

# 浮点运算解决方案
# bc运算器， scale决定保留几位小数
v1=$(echo "scale=4;3.44 / 5" | bc)
echo $v1

v1=10.46
v2=43.67
v3=33.2
v4=71
v5=$(bc << EOF
scale=4
a1=($v1 * $v2)
b2=($v3 * $v4)
a1+b1
EOF
)
echo $v5

# 退出脚本
# $? 保存上个已执行命令的退出状态码
date
echo $?

# 默认情况下，shell脚本会以脚本中最后一个命令的退出状态码退出
# 【exit】 命令指定一个退出状态码
# 状态码最大只能是【255】，超过会取模

```