### é“¾æ¥æ¦‚è§ˆ

1. ä»€ä¹ˆæ˜¯é“¾æ¥ï¼Ÿä¸ºä»€ä¹ˆè¦å­¦ä¹ é“¾æ¥
2. é¢„å¤„ç†ï¼š gcc -E -o main.i main.c;
3. ç¼–è¯‘ï¼š gcc -S -o main.s main.i;
4. æ±‡ç¼–ï¼š as -o main.o main.s;
5. é“¾æ¥ ld -static -o prog main.o sum.o
6. ç¨‹åºæ˜¯å¦‚ä½•è¿è¡Œçš„
7. ã€Šç¨‹åºå‘˜çš„è‡ªæˆ‘ä¿®å…»ã€‹

### å¯é‡å®šä½ç›®æ ‡æ–‡ä»¶

1. gcc -c main.c
2. wc -c main.c
3. å¯é‡å®šä½ç›®æ ‡æ–‡ä»¶åˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼šELF headerã€sectionsï¼Œsection header table
4. readelf -h main.o
5. readelf -S main.o
6. objdump -s -d main.o
7. å±€éƒ¨å˜é‡æ—¢ä¸åœ¨.dataä¸­ï¼Œä¹Ÿä¸å†.bssä¸­
8. sections: .text,.data,.bss(å’ŒCOMMONæå…¶ç±»ä¼¼),.rodata,.symtab
9. readelf -s main.o
10. symbolsåˆ†ä¸ºä¸‰ç±»ï¼šå…¨å±€ç¬¦å·ï¼Œå¤–éƒ¨ç¬¦å·ï¼Œå±€éƒ¨ç¬¦å·


### ç¬¦å·è§£æä¸é™æ€åº“

1. å¼ºç¬¦å·ã€å¼±ç¬¦å·
2. -fno-common/-Werror ç¼–è¯‘é€‰é¡¹ï¼Œé¿å…å¤šé‡å®šä¹‰çš„å…¨å±€ç¬¦å·
3. é™æ€åº“æ–‡ä»¶é›†åˆ libc.a
4. é™æ€é“¾æ¥åŸç†ï¼Œè¿æ¥å™¨ä½¿ç”¨é™æ€åº“è§£æå¼•ç”¨çš„è¿‡ç¨‹ï¼ˆè¿›è¡Œä¾›éœ€åŒ¹é…ï¼Œéœ€æ±‚åœ¨å‰ï¼Œä¾›ç»™åœ¨åï¼‰

### é‡å®šä½

1. é‡å®šä½åˆ†ä¸ºä¸¤æ­¥ï¼šé‡å®šä½èŠ‚å’Œç¬¦å·å®šä¹‰ï¼›é‡å®šä½ç¬¦å·å¼•ç”¨
2. é‡å®šä½æ¡ç›®( .rel.text; .rel.data)
3. é‡å®šä½ç›¸å¯¹/ç»å¯¹å¼•ç”¨çš„è¿‡ç¨‹

### å¯æ‰§è¡Œç›®æ ‡æ–‡ä»¶

1. å¯æ‰§è¡Œç›®æ ‡æ–‡ä»¶ç›¸æ¯”å¯é‡å®šä½ç›®æ ‡æ–‡ä»¶ï¼Œå¤šäº†.initï¼Œæ²¡æœ‰äº†.rel
2. code segmentä»£ç æ®µï¼›data segmentæ•°æ®æ®µ
3. åŠ è½½ä»¥åŠè¿è¡Œçš„è¿‡ç¨‹
4. c memory layout

### åŠ¨æ€é“¾æ¥å…±äº«åº“ ğŸ˜…

1. dlopen,dlsym